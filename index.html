
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PST - Real-time Pool Scoring Tool</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,600;0,800;0,900;1,800;1,900&display=swap" rel="stylesheet">
    
    <!-- Firebase Shim: Inject Firebase Global Objects for useGameSync hook -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, updateDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        window.FirebaseCore = { initializeApp };
        window.FirebaseAuth = { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken };
        window.FirebaseStore = { getFirestore, doc, setDoc, onSnapshot, updateDoc };
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; touch-action: manipulation; }
        .glass-effect { backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); }
        input[type="number"]::-webkit-inner-spin-button, 
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .toast-fade-in { animation: fadeInOut 2s ease-in-out forwards; }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
        .loading-spinner { border: 3px solid rgba(255, 255, 255, 0.1); border-left-color: #d946ef; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes neon-pulse-normal {
            0%, 100% { text-shadow: 0 0 10px rgba(217, 70, 239, 0.5), 0 0 20px rgba(217, 70, 239, 0.3); transform: scale(1); }
            50% { text-shadow: 0 0 20px rgba(217, 70, 239, 0.8), 0 0 35px rgba(217, 70, 239, 0.5); transform: scale(1.05); }
        }
        .race-effect-normal { animation: neon-pulse-normal 3s infinite ease-in-out; }
        @keyframes heartbeat-dynamic {
            0% { transform: scale(1); filter: drop-shadow(0 0 2px rgba(244, 63, 94, 0.5)); text-shadow: 0 0 5px rgba(244, 63, 94, 0.5); }
            15% { transform: scale(var(--beat-scale, 1.1)); filter: drop-shadow(0 0 15px rgba(244, 63, 94, 0.9)); text-shadow: 0 0 20px rgba(244, 63, 94, 0.8); }
            30% { transform: scale(1); filter: drop-shadow(0 0 2px rgba(244, 63, 94, 0.5)); }
            45% { transform: scale(var(--beat-scale, 1.1)); filter: drop-shadow(0 0 15px rgba(244, 63, 94, 0.9)); }
            60% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        .race-to-heartbeat-dynamic {
            animation-name: heartbeat-dynamic;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
            -webkit-text-stroke: 1px rgba(0,0,0,0.1);
        }
        @keyframes hill-hill-flash {
            0%, 100% { color: #ffffff; text-shadow: 0 0 20px red; transform: scale(1); }
            25% { color: #fde047; text-shadow: 0 0 40px red, 0 0 60px orange; transform: scale(1.15) rotate(-2deg); }
            50% { color: #ff0000; text-shadow: 0 0 60px red; transform: scale(1.05) rotate(2deg); }
            75% { color: #fde047; text-shadow: 0 0 40px red, 0 0 60px orange; transform: scale(1.15) rotate(-2deg); }
        }
        .hill-hill-effect {
            animation: hill-hill-flash 0.6s infinite linear;
            -webkit-text-stroke: 2px rgba(0,0,0,0.2);
        }
        @keyframes danger-pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); border-color: rgba(239, 68, 68, 0.5); }
            50% { box-shadow: 0 0 20px 0 rgba(239, 68, 68, 0.7); border-color: rgba(239, 68, 68, 1); background-color: rgba(239, 68, 68, 0.1); }
        }
        .card-danger { animation: danger-pulse 1.5s infinite ease-in-out; }
        @keyframes winner-glow {
            0%, 100% { box-shadow: 0 0 10px 0 rgba(234, 179, 8, 0.2); border-color: rgba(234, 179, 8, 0.5); }
            50% { box-shadow: 0 0 25px 0 rgba(234, 179, 8, 0.6); border-color: rgba(234, 179, 8, 1); }
        }
        .card-winner { animation: winner-glow 2s infinite ease-in-out; z-index: 10; }
        .text-scanlines {
            background-image: repeating-linear-gradient(to bottom, currentColor 0px, currentColor 2px, transparent 2px, transparent 4px);
            -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; color: currentColor; display: block; pointer-events: none;
        }
        @keyframes shimmer-gold {
            0% { background-position: -200% center; } 100% { background-position: 200% center; }
        }
        .winner-grand-card {
            z-index: 50; border: 3px solid #fbbf24;
            box-shadow: 0 0 60px -10px rgba(251, 191, 36, 0.6), inset 0 0 20px rgba(251, 191, 36, 0.3);
            background: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, rgba(251, 191, 36, 0.1) 20%, rgba(251, 191, 36, 0.1) 100%), 
                        linear-gradient(120deg, rgba(251, 191, 36, 0.05) 30%, rgba(251, 191, 36, 0.3) 50%, rgba(251, 191, 36, 0.05) 70%);
            background-size: 100% 100%, 200% 100%; animation: shimmer-gold 2.5s infinite linear;
        }
        @keyframes crown-float {
            0%, 100% { transform: translate(-50%, 0) scale(1) rotate(-5deg); filter: drop-shadow(0 0 10px rgba(234, 179, 8, 0.5)); }
            50% { transform: translate(-50%, -10px) scale(1.05); filter: drop-shadow(0 0 20px rgba(234, 179, 8, 0.8)); }
        }
        .grand-crown-container {
            position: absolute; top: -90px; left: 50%; animation: crown-float 3s infinite ease-in-out;
            z-index: 60; display: flex; flex-direction: column; align-items: center; width: 100%; pointer-events: none; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.9));
        }
        .crown-halo {
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); width: 160px; height: 160px;
            background: radial-gradient(circle, rgba(251, 191, 36, 0.8) 0%, rgba(251, 191, 36, 0) 70%); z-index: -1; animation: halo-pulse 2s infinite alternate;
        }
        @keyframes halo-pulse { from { opacity: 0.6; transform: translate(-50%, -50%) scale(0.9); } to { opacity: 1; transform: translate(-50%, -50%) scale(1.1); } }
        .winner-badge {
            background: linear-gradient(180deg, #FFFFFF 20%, #FFD700 50%, #B8860B 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 2px 0px #000000); 
            font-weight: 900; letter-spacing: 0.3em; text-transform: uppercase; font-size: 1rem; margin-top: 0.25rem;
        }
        .loser-dimmed { filter: grayscale(100%) opacity(0.3); transform: scale(0.95); transition: all 0.5s ease; }
        @keyframes fever-glow {
            0%, 100% { box-shadow: 0 0 15px 3px rgba(255, 100, 0, 0.5), 0 0 25px 8px rgba(255, 0, 0, 0.4), inset 0 0 10px rgba(255, 150, 0, 0.3); }
            50% { box-shadow: 0 0 25px 8px rgba(255, 100, 0, 0.8), 0 0 40px 15px rgba(255, 0, 0, 0.6), inset 0 0 15px rgba(255, 150, 0, 0.5); }
        }
        @keyframes fever-shake {
            0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-0.5deg); }
            20% { transform: translate(-2px, 0px) rotate(0.5deg); } 30% { transform: translate(2px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(0.5deg); } 50% { transform: translate(-1px, 2px) rotate(-0.5deg); }
            60% { transform: translate(-2px, 1px) rotate(0deg); } 70% { transform: translate(2px, 1px) rotate(-0.5deg); }
            80% { transform: translate(-1px, -1px) rotate(0.5deg); } 90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-0.5deg); }
        }
        .card-fever {
            animation: fever-glow 0.8s infinite ease-in-out alternate, fever-shake 0.5s infinite linear;
            border-color: #ff8c00; transform: scale(1.02); z-index: 20;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "vite": "https://esm.sh/vite@^7.3.1",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>
